import{v as s,r as l,j as a,P as U}from"./index-51458fea.js";import{I as P}from"./FormPage-bf27f4c0.js";import{G as b}from"./GeneralInput-3053352e.js";import{a as v}from"./GeneralSelect-9c691051.js";import{a as R,K,L as q,M as w,n as z,N as H,d as J}from"./Global.styled-292b38d9.js";import{a as Q}from"./CompanyCardMedia-2fb6a425.js";import{M as W}from"./ModalError-44e12d7c.js";import"./ByParameters.styled-98e82085.js";import"./GeneralInput.styled-2ea6be19.js";import"./useSlotProps-f8e42302.js";import"./Portal-1fe4831c.js";import"./CardMedia-d40f3ddc.js";import"./Modal-3e485fd6.js";const X=({formik:t})=>{var x;const{setAutoByMakerAndModel:y,allAutoMakers:m,autoByNumber:V,allAutoModelByMaker:B,autoByMakerAndModel:g,setRefError:E}=R(),S=s(K),u=s(q),o=s(w),{outsideUkraine:d}=s(Q),[n]=s(z),[D,h]=l.useState({name:"Оберіть марку авто"}),[i,M]=l.useState({name:"Оберіть модель авто"}),[c,p]=l.useState(!(n!=null&&n.stateNumber)),k=s(H),F=s(J),T=e=>{E(""),y([]),e.target.value&&d&&(p(!1),m()),e.target.value&&!d&&V(e.target.value),t.handleChange(e)};l.useEffect(()=>{n&&p(!1),n||p(!0)},[n]);const I=e=>{const r=e.target.value.trim().toUpperCase();e.target.value=r,t.handleChange(e)},O=e=>{M({name:"Оберіть модель авто"}),h(e),B(e.id),t.setFieldValue("maker",e.id)},G=e=>{M(e),t.setFieldValue("maker",e.autoMaker),t.setFieldValue("model",{id:e.id,name:e.name})},L=e=>{const r=e.target.value.trim().toUpperCase();e.target.value=r,t.handleChange(e)},f=l.useCallback(()=>{var r;const e=(r=o[0])==null?void 0:r.autoMaker;h(e),(o==null?void 0:o.length)===0&&m()},[o,m]);return l.useEffect(()=>{f()},[f]),l.useEffect(()=>{var A,C,N,j;const e=(C=(A=t.values)==null?void 0:A.brand)==null?void 0:C.replace(/ .*/,""),r=(j=(N=t.values)==null?void 0:N.brand)==null?void 0:j.replace(/^[^\s]+\s/,"").slice(0,1);!d&&(e==null?void 0:e.length)>0&&g(e+" "+r)},[(x=t.values)==null?void 0:x.brand,g,d]),F?a.jsx(W,{}):a.jsx(a.Fragment,{children:a.jsxs(P,{children:[a.jsx(b,{id:"stateNumber",lableText:"Номерний знак*:",handleBlur:T,customFunc:I,formikData:t}),t.errors.stateNumber?a.jsx("div",{className:"errorMessage",children:t.errors.stateNumber}):a.jsx("div",{style:{color:"red"},children:k}),a.jsx(b,{id:"year",lableText:"Рік випуску*:",formikData:t,isDisabled:c}),a.jsx(v,{id:"brand",lableText:"Марка*:",currentValue:D,optionsArr:S,defaultValue:{name:"Оберіть марку авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,changeCB:O,isDisabled:c}),a.jsx(v,{id:"model",lableText:"Модель*:",currentValue:i,optionsArr:(u==null?void 0:u.length)>0?u:o,defaultValue:{name:"Оберіть модель авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isDisabled:c,isValid:(i==null?void 0:i.name)!=="Оберіть модель авто",changeCB:G}),a.jsx(b,{id:"bodyNumber",lableText:"VIN Номер*:",formikData:t,customFunc:L,isDisabled:c})]})})};X.propTypes={formik:U.object};export{X as default};
