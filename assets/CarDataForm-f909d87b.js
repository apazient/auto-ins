import{w as o,r as l,j as s,P as O}from"./index-dbca3f2d.js";import{I as G}from"./FormPage-a64934af.js";import{G as c}from"./GeneralInput-2d33eacd.js";import{a as y}from"./GeneralSelect-5995709a.js";import{c as U,d as L,e as P,b as w,g as R}from"./CompanyCardMedia-d458c71b.js";import{a as q}from"./Global.styled-4b3cd880.js";import"./index-31609b20.js";import"./GeneralInput.styled-2602fae8.js";import"./useSlotProps-4d93e2d4.js";import"./Portal-5e5db086.js";import"./CardMedia-83df834e.js";const z=({formik:t})=>{var A;const{setAutoByMakerAndModel:S,allAutoMakers:d,autoByNumber:V,allAutoModelByMaker:j,autoByMakerAndModel:m}=q(),k=o(U),p=o(L),n=o(P),{outsideUkraine:r}=o(w),[i]=o(R),[v,b]=l.useState({name:"Оберіть марку авто"}),[D,g]=l.useState({name:"Оберіть модель авто"}),[u,h]=l.useState(!(i!=null&&i.stateNumber)),N=e=>{S([]),e.target.value&&r&&(h(!1),d()),e.target.value&&!r&&V(e.target.value).then(()=>{h(!1)}),t.handleChange(e)},F=e=>{const a=e.target.value.trim().toUpperCase();e.target.value=a,t.handleChange(e)},T=e=>{g({name:"Оберіть модель авто"}),b(e),j(e.id),t.setFieldValue("maker",e.id)},E=e=>{g(e),t.setFieldValue("maker",e.autoMaker),t.setFieldValue("model",{id:e.id,name:e.name})},I=e=>{const a=e.target.value.trim().toUpperCase();e.target.value=a,t.handleChange(e)},M=l.useCallback(()=>{var a;const e=(a=n[0])==null?void 0:a.autoMaker;b(e),n.length===0&&d()},[n,d]);return l.useEffect(()=>{M()},[M]),l.useEffect(()=>{var x,B,f,C;const e=(B=(x=t.values)==null?void 0:x.brand)==null?void 0:B.replace(/ .*/,""),a=(C=(f=t.values)==null?void 0:f.brand)==null?void 0:C.replace(/^[^\s]+\s/,"").slice(0,1);!r&&(e==null?void 0:e.length)>0&&m(e+" "+a)},[(A=t.values)==null?void 0:A.brand,m,r]),s.jsx(s.Fragment,{children:s.jsxs(G,{children:[s.jsx(c,{id:"stateNumber",lableText:"Номерний знак*:",handleBlur:N,customFunc:F,formikData:t}),s.jsx(c,{id:"year",lableText:"Рік випуску*:",formikData:t,isDisabled:u}),s.jsx(y,{id:"brand",lableText:"Марка*:",currentValue:v,optionsArr:k,defaultValue:{name:"Оберіть марку авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,changeCB:T,isDisabled:u}),s.jsx(y,{id:"model",lableText:"Модель*:",currentValue:D,optionsArr:p.length>0?p:n,defaultValue:{name:"Оберіть модель авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isDisabled:u,changeCB:E}),s.jsx(c,{id:"bodyNumber",lableText:"VIN Номер*:",formikData:t,customFunc:I,isDisabled:u})]})})};z.propTypes={formik:O.object};export{z as default};
