import{p as o,r,aK as C,aL as k,j as t,P as E,aM as G,ad as I,aN as O}from"./index-9a27f514.js";import{I as L}from"./FormPage-57e747d5.js";import{G as i}from"./GeneralInput-3b409043.js";import{G as j}from"./GeneralSelect-620b51ed.js";import{c as U,d as P,e as K,g as R,a as q}from"./CompanyCardMedia-9c92cfe3.js";import{u as w}from"./selectors-9a767233.js";import"./index-f9ecc311.js";import"./OutlinedInput-59d66413.js";import"./ownerWindow-fbe9f185.js";import"./Portal-280c603f.js";import"./useSlotProps-511f3482.js";import"./CardMedia-b15af46b.js";const z=({formik:a})=>{var M;const s=w(),v=o(U),m=o(P),n=o(K),{outsideUkraine:d}=o(R),[c]=o(q),[S,p]=r.useState({name:"Оберіть марку авто"}),[V,b]=r.useState({name:"Оберіть модель авто"}),[u,g]=r.useState(!(c!=null&&c.stateNumber)),f=e=>{s(G([])),e.target.value&&d&&(g(!1),s(C())),e.target.value&&!d&&s(I(e.target.value)).then(()=>{g(!1)}),a.handleChange(e)},D=e=>{const l=e.target.value.trim().toUpperCase();e.target.value=l,a.handleChange(e)},N=e=>{b({name:"Оберіть модель авто"}),p(e),s(O(e.id)),a.setFieldValue("maker",e.id)},F=e=>{b(e),a.setFieldValue("maker",e.autoMaker),a.setFieldValue("model",{id:e.id,name:e.name})},T=e=>{const l=e.target.value.trim().toUpperCase();e.target.value=l,a.handleChange(e)},h=r.useCallback(()=>{var l;const e=(l=n[0])==null?void 0:l.autoMaker;p(e),n.length===0&&s(C())},[n,s]);return r.useEffect(()=>{h()},[h]),r.useEffect(()=>{var x,A,y,B;const e=(A=(x=a.values)==null?void 0:x.brand)==null?void 0:A.replace(/ .*/,""),l=(B=(y=a.values)==null?void 0:y.brand)==null?void 0:B.replace(/^[^\s]+\s/,"").slice(0,1);!d&&(e==null?void 0:e.length)>0&&s(k(e+" "+l))},[(M=a.values)==null?void 0:M.brand,s,d]),t.jsx(t.Fragment,{children:t.jsxs(L,{children:[t.jsx(i,{id:"stateNumber",lableText:"Номерний знак*:",handleBlur:f,customFunc:D,formikData:a}),t.jsx(i,{id:"year",lableText:"Рік випуску*:",formikData:a,isDisabled:u}),a.errors.brand?t.jsx("div",{style:{color:"red"},children:a.errors.brand}):null,t.jsx(j,{id:"brand",lableText:"Марка*:",currentValue:S,optionsArr:v,defaultValue:{name:"Оберіть марку авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,changeCB:N,isDisabled:u}),a.errors.model?t.jsx("div",{style:{color:"red"},children:a.errors.model}):null,t.jsx(j,{id:"model",lableText:"Модель*:",currentValue:V,optionsArr:m.length>0?m:n,defaultValue:{name:"Оберіть модель авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isDisabled:u,changeCB:F}),t.jsx(i,{id:"bodyNumber",lableText:"VIN Номер*:",formikData:a,customFunc:T,isDisabled:u})]})})};z.propTypes={formik:E.object};export{z as default};
