import{v as o,r as n,j as s,P as O}from"./index-be353093.js";import{I as G}from"./FormPage-5d93fd06.js";import{G as m}from"./GeneralInput-4a745e51.js";import{a as y}from"./GeneralSelect-8ced014e.js";import{a as L,L as U,M as P,N as R,n as q}from"./Global.styled-45d67ee8.js";import{a as w}from"./CompanyCardMedia-155e183e.js";import"./ByParameters.styled-37109315.js";import"./GeneralInput.styled-3a2d81cc.js";import"./useSlotProps-c3d1cd62.js";import"./Portal-5855bf9f.js";import"./CardMedia-e2289994.js";const z=({formik:t})=>{var x;const{setAutoByMakerAndModel:B,allAutoMakers:i,autoByNumber:S,allAutoModelByMaker:V,autoByMakerAndModel:p}=L(),j=o(U),r=o(P),l=o(R),{outsideUkraine:u}=o(w),[c]=o(q),[k,b]=n.useState({name:"Оберіть марку авто"}),[N,g]=n.useState({name:"Оберіть модель авто"}),[d,h]=n.useState(!(c!=null&&c.stateNumber)),D=e=>{B([]),e.target.value&&u&&(h(!1),i()),e.target.value&&!u&&S(e.target.value).then(()=>{h(!1)}),t.handleChange(e)},F=e=>{const a=e.target.value.trim().toUpperCase();e.target.value=a,t.handleChange(e)},T=e=>{g({name:"Оберіть модель авто"}),b(e),V(e.id),t.setFieldValue("maker",e.id)},E=e=>{g(e),t.setFieldValue("maker",e.autoMaker),t.setFieldValue("model",{id:e.id,name:e.name})},I=e=>{const a=e.target.value.trim().toUpperCase();e.target.value=a,t.handleChange(e)},M=n.useCallback(()=>{var a;const e=(a=l[0])==null?void 0:a.autoMaker;b(e),(l==null?void 0:l.length)===0&&i()},[l,i]);return n.useEffect(()=>{M()},[M]),n.useEffect(()=>{var A,f,C,v;const e=(f=(A=t.values)==null?void 0:A.brand)==null?void 0:f.replace(/ .*/,""),a=(v=(C=t.values)==null?void 0:C.brand)==null?void 0:v.replace(/^[^\s]+\s/,"").slice(0,1);!u&&(e==null?void 0:e.length)>0&&p(e+" "+a)},[(x=t.values)==null?void 0:x.brand,p,u]),s.jsx(s.Fragment,{children:s.jsxs(G,{children:[s.jsx(m,{id:"stateNumber",lableText:"Номерний знак*:",handleBlur:D,customFunc:F,formikData:t}),s.jsx(m,{id:"year",lableText:"Рік випуску*:",formikData:t,isDisabled:d}),s.jsx(y,{id:"brand",lableText:"Марка*:",currentValue:k,optionsArr:j,defaultValue:{name:"Оберіть марку авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,changeCB:T,isDisabled:d}),s.jsx(y,{id:"model",lableText:"Модель*:",currentValue:N,optionsArr:(r==null?void 0:r.length)>0?r:l,defaultValue:{name:"Оберіть модель авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isDisabled:d,changeCB:E}),s.jsx(m,{id:"bodyNumber",lableText:"VIN Номер*:",formikData:t,customFunc:I,isDisabled:d})]})})};z.propTypes={formik:O.object};export{z as default};
