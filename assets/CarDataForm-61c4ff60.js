import{w as s,r,j as a,P as G}from"./index-f6188fe4.js";import{I as U}from"./FormPage-74f8c342.js";import{G as i}from"./GeneralInput-3a443fc9.js";import{a as v}from"./GeneralSelect-478fff95.js";import{c as k,d as L,e as P,b as w,g as R}from"./CompanyCardMedia-54ae1b26.js";import{a as q}from"./Global.styled-18ad5581.js";import"./index-cda70815.js";import"./GeneralInput.styled-7c8e6c7f.js";import"./useSlotProps-61d8879e.js";import"./Portal-66cf221b.js";import"./CardMedia-d1ecd48b.js";const z=({formik:t})=>{var x;const{setAutoByMakerAndModel:C,allAutoMakers:u,autoByNumber:N,allAutoModelByMaker:S,autoByMakerAndModel:m}=q(),V=s(k),b=s(L),o=s(P),{outsideUkraine:n}=s(w),[c]=s(R),[D,p]=r.useState({name:"Оберіть марку авто"}),[F,g]=r.useState({name:"Оберіть модель авто"}),[d,h]=r.useState(!(c!=null&&c.stateNumber)),T=e=>{C([]),e.target.value&&n&&(h(!1),u()),e.target.value&&!n&&N(e.target.value).then(()=>{h(!1)}),t.handleChange(e)},f=e=>{const l=e.target.value.trim().toUpperCase();e.target.value=l,t.handleChange(e)},E=e=>{g({name:"Оберіть модель авто"}),p(e),S(e.id),t.setFieldValue("maker",e.id)},I=e=>{g(e),t.setFieldValue("maker",e.autoMaker),t.setFieldValue("model",{id:e.id,name:e.name})},O=e=>{const l=e.target.value.trim().toUpperCase();e.target.value=l,t.handleChange(e)},M=r.useCallback(()=>{var l;const e=(l=o[0])==null?void 0:l.autoMaker;p(e),o.length===0&&u()},[o,u]);return r.useEffect(()=>{M()},[M]),r.useEffect(()=>{var y,A,B,j;const e=(A=(y=t.values)==null?void 0:y.brand)==null?void 0:A.replace(/ .*/,""),l=(j=(B=t.values)==null?void 0:B.brand)==null?void 0:j.replace(/^[^\s]+\s/,"").slice(0,1);!n&&(e==null?void 0:e.length)>0&&m(e+" "+l)},[(x=t.values)==null?void 0:x.brand,m,n]),a.jsx(a.Fragment,{children:a.jsxs(U,{children:[a.jsx(i,{id:"stateNumber",lableText:"Номерний знак*:",handleBlur:T,customFunc:f,formikData:t}),a.jsx(i,{id:"year",lableText:"Рік випуску*:",formikData:t,isDisabled:d}),a.jsx(v,{id:"brand",lableText:"Марка*:",currentValue:D,optionsArr:V,defaultValue:{name:"Оберіть марку авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,changeCB:E,isDisabled:d}),t.errors.stateNumber?a.jsx("div",{style:{color:"red"},children:t.errors.stateNumber}):null,t.errors.model?a.jsx("div",{style:{color:"red"},children:t.errors.model}):null,t.errors.bodyNumber?a.jsx("div",{style:{color:"red"},children:t.errors.bodyNumber}):null,t.errors.year?a.jsx("div",{style:{color:"red"},children:t.errors.year}):null,a.jsx(v,{id:"model",lableText:"Модель*:",currentValue:F,optionsArr:b.length>0?b:o,defaultValue:{name:"Оберіть модель авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isDisabled:d,changeCB:I}),a.jsx(i,{id:"bodyNumber",lableText:"VIN Номер*:",formikData:t,customFunc:O,isDisabled:d})]})})};z.propTypes={formik:G.object};export{z as default};
